# 安全公式计算器 Pro Max 使用说明书

## 版权声明
本软件由杜玛开发，版权无限期所有。不提供技术支持，不提供联系邮箱或网站。

## 目录
1. [产品概述](#产品概述)
2. [快速入门](#快速入门)
3. [功能详解](#功能详解)
4. [专业使用指南](#专业使用指南)
5. [应用场景示例](#应用场景示例)
6. [常见问题解答](#常见问题解答)
7. [版本更新历史](#版本更新历史)

## 产品概述

### 1.1 软件简介
安全公式计算器 Pro Max 是一款功能强大的数学计算工具，支持复杂数学表达式计算、变量管理、历史记录等功能。采用安全评估机制，防止恶意代码执行。

### 1.2 适用人群
- 学生：完成数学作业、验证计算结果
- 教师：准备教学材料、检查学生作业
- 工程师：进行工程计算、公式验证
- 科研人员：处理实验数据、验证数学模型
- 财务人员：财务计算、利率换算
- 普通用户：日常简单计算

### 1.3 系统要求
- 操作系统：Windows/macOS/Linux
- Python 3.6 或更高版本
- PyQt5 库

## 快速入门

### 2.1 安装与启动
1. 确保已安装Python环境
2. 安装依赖：`pip install PyQt5`
3. 运行程序：`python Secure_Calculator_Pro.py`

### 2.2 基本计算
在输入框中输入数学表达式，按回车或点击"计算"按钮：
```
示例：3+5*2
结果：13
```

### 2.3 界面布局
- **顶部**：计算结果区
- **中部**：可折叠控制面板（包含4个标签页）
- **底部**：输入区和状态栏

## 功能详解

### 3.1 计算功能

#### 3.1.1 基本运算
| 运算符 | 功能 | 示例 | 结果 |
|--------|------|------|------|
| + | 加法 | 2+3 | 5 |
| - | 减法 | 5-2 | 3 |
| * | 乘法 | 2*3 | 6 |
| / | 除法 | 6/2 | 3 |
| // | 整除 | 7//2 | 3 |
| % | 取模 | 7%2 | 1 |
| ** | 幂运算 | 2**3 | 8 |

#### 3.1.2 高级函数
- **三角函数**：sin, cos, tan, asin, acos, atan
- **对数函数**：log, log10, log2
- **其他函数**：sqrt, exp, factorial, gcd, lcm

示例：
```
sin(pi/2) = 1.0
log10(100) = 2.0
gcd(12,18) = 6
```

### 3.2 变量管理
- **定义变量**：`变量名=表达式`（如：`a=5`）
- **使用变量**：在表达式中直接使用变量名
- **管理界面**：在"变量"标签页中查看、添加、删除变量

### 3.3 历史记录
- 自动保存所有计算记录
- 支持导出为文本或JSON格式
- 可随时清除历史记录

### 3.4 个性化设置
- **主题**：默认、深色、浅色
- **字体**：多种字体选择
- **显示格式**：小数位数、科学计数法

## 专业使用指南

### 4.1 安全评估机制
本计算器采用白名单机制，仅允许执行预定义的数学函数，防止代码注入攻击。评估过程：
1. 输入清理：移除空白字符，替换中文符号
2. 安全检查：验证仅包含合法字符
3. 受限执行：在受限环境中评估表达式

### 4.2 变量作用域
- 变量全局有效
- 变量名必须符合Python标识符规则
- 变量可被后续所有表达式引用

### 4.3 精度控制
通过设置中的"小数位数"可控制结果显示精度：
```
pi显示为6位小数：3.141593
pi显示为10位小数：3.1415926536
```

## 应用场景示例

### 5.1 教育场景
**学生作业验证**：
```
问题：计算半径为5的圆面积
输入：pi*5**2
结果：78.539816
```

### 5.2 工程计算
**材料强度计算**：
```
定义变量：
E=2.1e11  # 弹性模量
I=3.2e-6  # 惯性矩
L=2.5     # 梁长度

计算临界载荷：
P=pi**2*E*I/L**2
结果：1061.880132
```

### 5.3 金融计算
**复利计算**：
```
定义变量：
P=10000   # 本金
r=0.05    # 年利率
n=5       # 年数

计算本息和：
P*(1+r)**n
结果：12762.81563
```

## 常见问题解答

### 6.1 计算错误
**问题**：输入`sin(pi/2`得到错误提示
**解决**：检查括号是否配对，修正为`sin(pi/2)`

### 6.2 变量问题
**问题**：无法使用变量`2a`
**原因**：变量名不能以数字开头，改为`a2`

### 6.3 函数不支持
**问题**：输入`random()`提示函数不存在
**原因**：随机函数不在安全函数列表中

## 版本更新历史

### 7.1 当前版本：v1.6.1
- 新增LCM函数
- 优化变量管理界面
- 修复深色主题显示问题

### 7.2 历史版本
- v1.5.0：增加科学计数法支持
- v1.4.0：添加自动保存功能
- v1.3.0：引入变量管理功能

---

本说明书由杜玛编写，版权无限期所有。软件功能可能随版本更新而变化，恕不另行通知。
